{% load static %}

<style>
  .choice-button {
    background-color: #BCAAA4;
    color: #3E3025;
    padding: 0.8rem 1.2rem;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    width: 100%;
    font-family: 'Gowun Batang', serif;
    transition: background 0.2s ease;
  }

  .choice-button:hover {
    background-color: #A67C52;
    color: white;
  }
</style>

<div id="recommend-choice-modal" style="display: none;
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.4); z-index: 9999;
    justify-content: center; align-items: center;">

  <div style="background-color: white; border-radius: 12px; padding: 2rem 2.5rem;
      width: 500px; max-width: 90%; box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); 
      position: relative; display: flex; flex-direction: column; align-items: center;
      z-index: 10000;">

    <h2 style="font-size: 1.4rem; margin-bottom: 1.8rem; text-align: center;">
      어떤 방식으로 추천받을까요?
    </h2>

    <div style="display: flex; flex-direction: column; gap: 1rem; width: 100%;">
      <button onclick="openTextRecommend()" class="choice-button">문장 입력 기반 추천</button>
      <button onclick="openCardBasedCheck()" class="choice-button">독서카드 기반 추천</button>
      <button onclick="openLibraryBasedCheck()" class="choice-button">내 서재 기반 추천</button>
    </div>

    <button onclick="closeChoiceModal()" 
      style="position: absolute; top: 12px; right: 16px; background: none;
      border: none; font-size: 1.3rem; color: #666; cursor: pointer;">×</button>
  </div>
</div>

<script>
  function openChoiceModal() {
    document.getElementById('recommend-choice-modal').style.display = 'flex';
  }

  function closeChoiceModal() {
    document.getElementById('recommend-choice-modal').style.display = 'none';
  }

  function openTextRecommend() {
    closeChoiceModal();
    openModal();  // 기존 modal_input.html 열기
  }

  function openCardBasedCheck() {
    closeChoiceModal();
    if (!window.userHasCard) {
      alert("독서카드가 없습니다. 먼저 생성해 주세요.");
      openCardModal();  // 독서카드 만들기 모달
    } else {
      openCardBasedRecommendModal();
    }
  }

  function openLibraryBasedCheck() {
    closeChoiceModal();
    if (window.userLibraryCount === 0) {
      alert("서재가 비어 있어 추천을 받을 수 없습니다.");
    } else {
      openLibraryBasedRecommend();  // 추후 구현할 함수
    }
  }
</script>
